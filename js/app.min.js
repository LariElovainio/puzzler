!function(){const t={};function e(e){let o=document.createElement("button");return e=Number(e+1),o.type="button",o.classList.add("piece"),o.textContent=e,e==t.pieceCount&&(o.classList.add("empty"),t.empty=o),o}function o(){let e={row:Math.floor(1+Math.random()*t.dimension),column:Math.floor(1+Math.random()*t.dimension)};return e=function(e){for(let n in t.state)t.state[n].row==e.row&&t.state[n].column==e.column&&(e=o());return t.state.push(e),e}(e)}function n(t){return{row:t.style.getPropertyValue("--row"),column:t.style.getPropertyValue("--column")}}function r(e){if("BUTTON"==e.target.tagName){let o=function(e){let o=!1,r=n(t.empty),l=n(e);return r.row==l.row?1==Math.abs(r.column-l.column)&&(o=!0):r.column==l.column&&1==Math.abs(r.row-l.row)&&(o=!0),o&&(o={empty:r,piece:l}),o}(e.target);o&&(!function(e,o){let r=n(e.target),l="";r.row<o.empty.row?l="down":r.row>o.empty.row?l="up":r.column<o.empty.column?l="right":r.column>o.empty.column&&(l="left");e.target.classList.add("slide-"+l),console.info("Direction",l),e.target.ontransitionend=function(){e.target.classList.remove("slide-"+l),e.target.style.setProperty("--row",o.empty.row),e.target.style.setProperty("--column",o.empty.column),t.empty.style.setProperty("--row",o.piece.row),t.empty.style.setProperty("--column",o.piece.column),function(){let e=document.querySelectorAll(".piece");for(let t=0;t<e.length;t++){let o=n(e[t]);if(o.row!=e[t].dataset.goalRow||o.column!=e[t].dataset.goalColumn)return!1}!function(){let e=prompt("You won! Name:"),o=localStorage.getItem("scoreboard");o=o?JSON.parse(o):[];o.push({name:e,duration:t.gameDuration,moves:t.moveCount}),localStorage.setItem("scoreboard",o),window.location=""}()}()}}(e,o),t.moveCount++)}t.gameDuration=performance.now()}t.dimension=4,t.pieceCount=t.dimension*t.dimension,t.board=document.querySelector(".board"),t.state=[],t.moveCount=0,t.gameDuration=0,function(){let o=t.pieceCount;for(let n=0;n<o;n++){let o=e(n);t.board.appendChild(o);let r=1+Math.floor(n/t.dimension);o.dataset.goalRow=r,o.dataset.goalColumn=n+1-(r-1)*t.dimension}}(),function(){let t=document.querySelectorAll(".piece");for(let e=0;e<t.length;e++){let n=o();t[e].style.setProperty("--row",n.row),t[e].style.setProperty("--column",n.column)}}(),document.addEventListener("click",r)}();